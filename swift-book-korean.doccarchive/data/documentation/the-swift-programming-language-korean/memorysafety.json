{"metadata":{"role":"article","title":"메모리 안전성 (Memory Safety)"},"hierarchy":{"paths":[["doc:\/\/org.swift.tsplk\/documentation\/TSPLK"]]},"primaryContentSections":[{"content":[{"inlineContent":[{"type":"text","text":"기본적으로 Swift는 코드에서 발생할 안전하지 않은 동작을 방지합니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어"},{"type":"text","text":" "},{"type":"text","text":"Swift는 변수가 사용되기 전에 초기화 되고,"},{"type":"text","text":" "},{"type":"text","text":"메모리가 해제된 후에는 접근되지 않으며,"},{"type":"text","text":" "},{"type":"text","text":"배열 인덱스는 범위를 벗어난 오류가 있는지 확인합니다."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Swift는 또한 동일한 메모리 영역에 대해"},{"type":"text","text":" "},{"type":"text","text":"다중 접근이 충돌하지 않도록 보장하고,"},{"type":"text","text":" "},{"type":"text","text":"이것은 메모리의 위치를 수정하는 코드가"},{"type":"text","text":" "},{"type":"text","text":"해당 메모리에 대한 접근 권한을 갖도록 보장합니다."},{"type":"text","text":" "},{"type":"text","text":"Swift는 메모리를 자동으로 관리하기 때문에,"},{"type":"text","text":" "},{"type":"text","text":"대부분의 경우 메모리 접근에 대해 생각할 필요가 없습니다."},{"type":"text","text":" "},{"type":"text","text":"그러나"},{"type":"text","text":" "},{"type":"text","text":"어디서 충돌이 발생할 수 있는지 이해하는 것이 중요하며,"},{"type":"text","text":" "},{"type":"text","text":"메모리 접근이 충돌하는 코드를 작성하지 않도록 해야 합니다."},{"type":"text","text":" "},{"type":"text","text":"코드에 충돌이 있다면,"},{"type":"text","text":" "},{"type":"text","text":"컴파일 때나 런타임 때 오류가 발생합니다."}],"type":"paragraph"},{"anchor":"%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A0%91%EA%B7%BC-%EC%B6%A9%EB%8F%8C-%EC%9D%B4%ED%95%B4-Understanding-Conflicting-Access-to-Memory","text":"메모리 접근 충돌 이해 (Understanding Conflicting Access to Memory)","type":"heading","level":2},{"inlineContent":[{"type":"text","text":"메모리에 접근하는 것은"},{"type":"text","text":" "},{"type":"text","text":"변수의 값을 설정하거나"},{"type":"text","text":" "},{"type":"text","text":"함수에 인자를 전달하는 것과 같은 동작을 할 때 코드에서 발생합니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어"},{"type":"text","text":" "},{"type":"text","text":"다음 코드는 읽기 접근과 쓰기 접근 모두 포함합니다:"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ A write access to the memory where one is stored.","var one = 1","","\/\/ A read access from the memory where one is stored.","print(\"We're number \\(one)!\")"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"메모리 접근 충돌은"},{"type":"text","text":" "},{"type":"text","text":"코드의 다른 부분이"},{"type":"text","text":" "},{"type":"text","text":"같은 시간에 같은 메모리 위치에 접근할 때 발생할 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"같은 시간에 메모리 위치에 다중 접근은"},{"type":"text","text":" "},{"type":"text","text":"예측할 수 없거나 일관성 없는 동작이 발생할 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"Swift는 코드의 여러 라인에 걸쳐"},{"type":"text","text":" "},{"type":"text","text":"값을 수정할 수 있으므로,"},{"type":"text","text":" "},{"type":"text","text":"값이 수정되는 중간에"},{"type":"text","text":" "},{"type":"text","text":"값에 접근할 수 있습니다."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"비슷한 문제로"},{"type":"text","text":" "},{"type":"text","text":"종이에 쓰여진 예산을"},{"type":"text","text":" "},{"type":"text","text":"어떻게 업데이트 하는지 생각해 볼 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"예산을 업데이트 하는 것은 2단계로 이루어집니다:"},{"type":"text","text":" "},{"type":"text","text":"먼저 항목의 이름과 가격을 추가한 다음에"},{"type":"text","text":" "},{"type":"text","text":"현재 목록에 있는 항목을 반영하기 위해"},{"text":" ","type":"text"},{"text":"총 금액을 변경합니다.","type":"text"},{"text":" ","type":"text"},{"text":"업데이트 전후에","type":"text"},{"text":" ","type":"text"},{"text":"아래 그림과 같이","type":"text"},{"text":" ","type":"text"},{"text":"예산에서 정보를 읽고","type":"text"},{"text":" ","type":"text"},{"text":"올바른 답을 얻을 수 있습니다.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"memory_shopping"}],"type":"paragraph"},{"inlineContent":[{"text":"예산에 항목을 추가하는 동안에는","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"총 금액이 새로 추가된 항목에 대해"},{"type":"text","text":" "},{"type":"text","text":"업데이트되지 않았기 때문에"},{"type":"text","text":" "},{"type":"text","text":"임시적으로 유효하지 않은 상태입니다."},{"type":"text","text":" "},{"type":"text","text":"항목을 추가하는 동안"},{"type":"text","text":" "},{"type":"text","text":"총 금액을 읽으면"},{"text":" ","type":"text"},{"text":"잘못된 정보를 얻습니다.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"이 예시는 또한","type":"text"},{"text":" ","type":"text"},{"text":"메모리 접근 충돌을 수정할 때","type":"text"},{"text":" ","type":"text"},{"text":"발생할 수 있는 문제를 보여줍니다:","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"때로는 충돌을 수정하는 방법이 여러 가지일 수 있으며,"},{"type":"text","text":" "},{"type":"text","text":"각 방법이 서로 다른 결과를 낼 수 있고,"},{"type":"text","text":" "},{"type":"text","text":"어떤 결과가 올바른지 항상 명확하지 않습니다."},{"type":"text","text":" "},{"type":"text","text":"이 예시에서"},{"type":"text","text":" "},{"type":"text","text":"기존 총 금액이 필요한지,"},{"type":"text","text":" "},{"type":"text","text":"업데이트된 총 금액이 필요한지에 따라"},{"type":"text","text":" "},{"type":"text","text":"$5이나 $320이 모두 올바른 답이 될 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"충돌 접근을 수정하기 전에"},{"type":"text","text":" "},{"type":"text","text":"수행할 작업의 의도를 파악해야 합니다."}],"type":"paragraph"},{"content":[{"inlineContent":[{"type":"text","text":"동시성이나 다중 스레드 코드를 작성해본 적이 있다면,"},{"type":"text","text":" "},{"type":"text","text":"메모리 접근 충돌이 익숙한 문제일 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"그러나"},{"type":"text","text":" "},{"type":"text","text":"여기서 설명한 접근 충돌은"},{"type":"text","text":" "},{"type":"text","text":"단일 스레드에서 발생할 수 있으며"},{"type":"text","text":" "},{"type":"text","text":"동시성이나 다중 스레드 코드와는 관련이 "},{"inlineContent":[{"text":"없습니다","type":"text"}],"type":"emphasis"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"단일 스레드 내에서"},{"type":"text","text":" "},{"type":"text","text":"메모리 접근 충돌이 발생하면"},{"type":"text","text":" "},{"type":"text","text":"Swift는 컴파일 시나 런타임 시"},{"type":"text","text":" "},{"type":"text","text":"오류가 발생합니다."},{"type":"text","text":" "},{"type":"text","text":"다중 스레드 코드의 경우"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/xcode\/diagnosing_memory_thread_and_crash_issues_early","isActive":true},{"type":"text","text":"를"},{"type":"text","text":" "},{"type":"text","text":"사용하여 스레드 간에 충돌하는 접근을 감지할 수 있습니다."}],"type":"paragraph"}],"name":"Note","style":"note","type":"aside"},{"type":"heading","level":3,"text":"메모리 접근의 특징 (Characteristics of Memory Access)","anchor":"%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A0%91%EA%B7%BC%EC%9D%98-%ED%8A%B9%EC%A7%95-Characteristics-of-Memory-Access"},{"type":"paragraph","inlineContent":[{"text":"메모리 접근이 충돌을 일으킬 수 있는지 판단할 때 고려해야 할","type":"text"},{"text":" ","type":"text"},{"text":"특성은 세 가지입니다:","type":"text"},{"text":" ","type":"text"},{"text":"접근이 읽기 접근인지 쓰기 접근인지,","type":"text"},{"text":" ","type":"text"},{"text":"접근의 지속시간,","type":"text"},{"text":" ","type":"text"},{"text":"접근하는 메모리의 위치입니다.","type":"text"},{"text":" ","type":"text"},{"text":"구체적으로","type":"text"},{"text":" ","type":"text"},{"text":"아래의 조건을 모두 만족하는","type":"text"},{"text":" ","type":"text"},{"text":"두 접근이 있다면 충돌이 발생합니다:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"두 접근이 모두 읽기 접근이거나, 두 접근이 모두 atomic이 아닙니다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"메모리의 같은 위치에 접근합니다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"접근하는 시간이 겹칩니다."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"읽기 접근과 쓰기 접근의 차이는"},{"type":"text","text":" "},{"type":"text","text":"일반적으로 명확합니다:"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근은 메모리의 위치의 값을 변경하지만,"},{"type":"text","text":" "},{"type":"text","text":"읽기 접근은 변경하지 않습니다."},{"type":"text","text":" "},{"type":"text","text":"메모리의 위치는"},{"type":"text","text":" "},{"type":"text","text":"예를 들어 변수, 상수, 프로퍼티와 같이"},{"type":"text","text":" "},{"type":"text","text":"실제로 접근하는 항목을 나타냅니다."},{"type":"text","text":" "},{"type":"text","text":"메모리 접근의 시간은"},{"type":"text","text":" "},{"type":"text","text":"즉시(instantaneous) 발생하거나 장기적(long-term)일 수 있습니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"접근이 "},{"type":"emphasis","inlineContent":[{"text":"atomic","type":"text"}]},{"type":"text","text":"이라는 것은"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomic"},{"type":"text","text":" 또는 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomiclazyreference"},{"type":"text","text":"의 atomic 연산을 호출하는 경우이거나,"},{"type":"text","text":" "},{"type":"text","text":"C atomic 연산자만 사용하는 경우를 의미합니다;"},{"type":"text","text":" "},{"type":"text","text":"그렇지 않으면 nonatomic입니다."},{"type":"text","text":" "},{"type":"text","text":"C의 atomic 함수 목록은 "},{"code":"stdatomic(3)","type":"codeVoice"},{"type":"text","text":" 메뉴얼 페이지에서 확인 가능합니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"접근이 "},{"type":"emphasis","inlineContent":[{"type":"text","text":"즉시"}]},{"type":"text","text":"인 경우는"},{"type":"text","text":" "},{"type":"text","text":"접근이 시작되고 종료되기 전에"},{"type":"text","text":" "},{"type":"text","text":"다른 코드를 실행할 수 없는 경우입니다."},{"type":"text","text":" "},{"type":"text","text":"일반적으로 두 개의 즉시 접근은 동시에 발생할 수 없습니다."},{"type":"text","text":" "},{"type":"text","text":"대부분 메모리 접근은 즉시 접근입니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어"},{"type":"text","text":" "},{"type":"text","text":"아래 코드 목록의 모든 읽기 접근과 쓰기 접근은 즉시 접근입니다:"}]},{"type":"codeListing","syntax":"swift","code":["func oneMore(than number: Int) -> Int {","    return number + 1","}","","var myNumber = 1","myNumber = oneMore(than: myNumber)","print(myNumber)","\/\/ Prints \"2\""]},{"type":"paragraph","inlineContent":[{"text":"그러나","type":"text"},{"text":" ","type":"text"},{"text":"메모리에 접근하는 여러 방법 중에는","type":"text"},{"text":" ","type":"text"},{"text":"다른 코드 실행에 걸쳐있는","type":"text"},{"text":" ","type":"text"},{"inlineContent":[{"text":"장기(long-term)","type":"text"}],"type":"emphasis"},{"text":" 접근도 있습니다.","type":"text"},{"text":" ","type":"text"},{"text":"즉각 접근(instantaneous access)과 장기 접근(long-term access)의 차이점은","type":"text"},{"text":" ","type":"text"},{"text":"장기 접근이 시작되고 종료되기 전에","type":"text"},{"text":" ","type":"text"},{"text":"다른 코드가 실행될 수 있다는 것입니다.","type":"text"},{"text":" ","type":"text"},{"text":"이것을 *겹침(overlap)*이라 합니다.","type":"text"},{"text":" ","type":"text"},{"text":"장기 접근은","type":"text"},{"text":" ","type":"text"},{"text":"다른 장기 접근이나 즉시 접근과 겹칠 수 있습니다.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"겹치는 접근은 함수와 메서드의 in-out 매개변수를 사용하거나"},{"type":"text","text":" "},{"type":"text","text":"구조체의 mutating 메서드를 사용하는"},{"type":"text","text":" "},{"type":"text","text":"코드에서 주로 나타납니다."},{"type":"text","text":" "},{"type":"text","text":"Swift 코드에서 장기 접근이 사용되는 구체적인 경우는"},{"type":"text","text":" "},{"type":"text","text":"아래에서 설명합니다."}]},{"text":"In-Out 매개변수에 대한 접근 충돌 (Conflicting Access to In-Out Parameters)","level":2,"type":"heading","anchor":"In-Out-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%91%EA%B7%BC-%EC%B6%A9%EB%8F%8C-Conflicting-Access-to-In-Out-Parameters"},{"type":"paragraph","inlineContent":[{"text":"함수는 모든 in-out 매개변수에 대해","type":"text"},{"text":" ","type":"text"},{"text":"장기 쓰기 접근을 가지고 있습니다.","type":"text"},{"text":" ","type":"text"},{"text":"in-out 매개변수에 대한 쓰기 접근은","type":"text"},{"text":" ","type":"text"},{"text":"모든 일반 매개변수가 평가된 후에 시작되고,","type":"text"},{"text":" ","type":"text"},{"text":"해당 함수 호출이 끝날 때까지 지속됩니다.","type":"text"},{"text":" ","type":"text"},{"text":"In-out 매개변수가 여러 개인 경우","type":"text"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근은 매개변수가 나타나는 순서와 동일한 순서로 시작됩니다."}]},{"type":"paragraph","inlineContent":[{"text":"이 장기 쓰기 접근의 결과 중 하나는","type":"text"},{"text":" ","type":"text"},{"text":"범위 규칙과 접근 제어가 허용하더라도","type":"text"},{"text":" ","type":"text"},{"text":"기존 변수에 대한 모든 접근은 충돌을 생성하므로","type":"text"},{"text":" ","type":"text"},{"text":"in-out 파리미터로 전달된 원래 변수에","type":"text"},{"text":" ","type":"text"},{"text":"접근할 수 없습니다.","type":"text"},{"text":" ","type":"text"},{"text":"예를 들어:","type":"text"}]},{"code":["var stepSize = 1","","func increment(_ number: inout Int) {","    number += stepSize","}","","increment(&stepSize)","\/\/ Error: conflicting accesses to stepSize"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"위의 코드에서"},{"type":"text","text":" "},{"code":"stepSize","type":"codeVoice"},{"type":"text","text":"는 전역 변수이고,"},{"type":"text","text":" "},{"type":"text","text":"일반적으로 "},{"code":"increment(_:)","type":"codeVoice"},{"type":"text","text":" 내에서 접근할 수 있습니다."},{"type":"text","text":" "},{"type":"text","text":"그러나"},{"type":"text","text":" "},{"code":"stepSize","type":"codeVoice"},{"type":"text","text":"에 읽기 접근은"},{"type":"text","text":" "},{"code":"number","type":"codeVoice"},{"type":"text","text":"에 쓰기 접근과 겹칩니다."},{"type":"text","text":" "},{"type":"text","text":"아래 그림에서 보았듯이"},{"type":"text","text":" "},{"code":"number","type":"codeVoice"},{"type":"text","text":"와 "},{"code":"stepSize","type":"codeVoice"},{"type":"text","text":" 모두 같은 메모리의 위치를 참조합니다."},{"type":"text","text":" "},{"type":"text","text":"읽기와 쓰기 접근이"},{"type":"text","text":" "},{"type":"text","text":"같은 메모리를 참조하면서"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생합니다."}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"memory_increment"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"이 충돌을 해결하는 한 가지 방법은"},{"type":"text","text":" "},{"code":"stepSize","type":"codeVoice"},{"type":"text","text":"의 복사본을 명확하게 지정하는 것입니다:"}]},{"code":["\/\/ Make an explicit copy.","var copyOfStepSize = stepSize","increment(&copyOfStepSize)","","\/\/ Update the original.","stepSize = copyOfStepSize","\/\/ stepSize is now 2"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"code":"increment(_:)","type":"codeVoice"},{"text":" 호출 전에 ","type":"text"},{"code":"stepSize","type":"codeVoice"},{"text":"의 복사본을 만들면,","type":"text"},{"text":" ","type":"text"},{"code":"copyOfStepSize","type":"codeVoice"},{"text":"는","type":"text"},{"text":" ","type":"text"},{"text":"현재 ","type":"text"},{"code":"stepSize","type":"codeVoice"},{"text":" 값을 기준으로 증가됩니다.","type":"text"},{"text":" ","type":"text"},{"text":"읽기 접근은 쓰기 접근이 시작되기 전에 끝나므로","type":"text"},{"text":" ","type":"text"},{"text":"충돌이 일어나지 않습니다.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"in-out 매개변수에 대한"},{"type":"text","text":" "},{"type":"text","text":"장기 쓰기 접근의 또 다른 결과는"},{"type":"text","text":" "},{"type":"text","text":"단일 변수를"},{"type":"text","text":" "},{"type":"text","text":"같은 함수의"},{"type":"text","text":" "},{"type":"text","text":"여러 in-out 매개변수에 전달하면"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생한다는 것입니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어:"}]},{"code":["func balance(_ x: inout Int, _ y: inout Int) {","    let sum = x + y","    x = sum \/ 2","    y = sum - x","}","var playerOneScore = 42","var playerTwoScore = 30","balance(&playerOneScore, &playerTwoScore)  \/\/ OK","balance(&playerOneScore, &playerOneScore)","\/\/ Error: conflicting accesses to playerOneScore"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"위의 "},{"type":"codeVoice","code":"balance(_:_:)"},{"type":"text","text":" 함수는"},{"type":"text","text":" "},{"type":"text","text":"총 값을 균등하게 나누기 위해"},{"type":"text","text":" "},{"type":"text","text":"두 매개변수를 수정합니다."},{"type":"text","text":" "},{"type":"codeVoice","code":"playerOneScore"},{"type":"text","text":"와 "},{"type":"codeVoice","code":"playerTwoScore"},{"type":"text","text":"를 전달하면"},{"type":"text","text":" "},{"type":"text","text":"두 쓰기 접근은 동시에 실행되지만"},{"type":"text","text":" "},{"type":"text","text":"메모리의 다른 위치를 접근하므로"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생하지 않습니다."},{"type":"text","text":" "},{"type":"text","text":"반대로"},{"type":"text","text":" "},{"type":"text","text":"두 매개변수 모두에 대해 값으로 "},{"type":"codeVoice","code":"playerOneScore"},{"type":"text","text":"를 전달하면"},{"type":"text","text":" "},{"type":"text","text":"동시에 메모리의 같은 위치를"},{"type":"text","text":" "},{"type":"text","text":"두 쓰기 접근이 수행되므로"},{"type":"text","text":" "},{"type":"text","text":"충돌이 일어납니다."}]},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"연산자는 함수이므로","type":"text"},{"text":" ","type":"text"},{"text":"in-out 매개변수에 장기 접근을 할 수 있습니다.","type":"text"},{"text":" ","type":"text"},{"text":"예를 들어 ","type":"text"},{"type":"codeVoice","code":"balance(_:_:)"},{"text":"가 ","type":"text"},{"type":"codeVoice","code":"<^>"},{"text":"라는 연산자 함수라면","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"playerOneScore <^> playerOneScore"},{"text":"를 작성하면","type":"text"},{"text":" ","type":"text"},{"code":"balance(&playerOneScore, &playerOneScore)","type":"codeVoice"},{"text":"와","type":"text"},{"text":" ","type":"text"},{"text":"동일한 충돌이 발생합니다.","type":"text"}]}]},{"anchor":"%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C-self%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%91%EA%B7%BC-%EC%B6%A9%EB%8F%8C-Conflicting-Access-to-self-in-Methods","type":"heading","level":2,"text":"메서드에서 self에 대한 접근 충돌 (Conflicting Access to self in Methods)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"구조체의 mutating 메서드는"},{"type":"text","text":" "},{"type":"text","text":"메서드가 호출되는 동안 "},{"code":"self","type":"codeVoice"},{"type":"text","text":"에 대한 쓰기 접근을 가집니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어 각 플레이어는 데미지를 입으면 줄어드는 체력량과"},{"type":"text","text":" "},{"type":"text","text":"특수 능력을 사용하면 줄어드는 에너지량을 가지는"},{"type":"text","text":" "},{"type":"text","text":"게임이 있다고 생각해 봅시다."}]},{"code":["struct Player {","    var name: String","    var health: Int","    var energy: Int","","    static let maxHealth = 10","    mutating func restoreHealth() {","        health = Player.maxHealth","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"위의 "},{"type":"codeVoice","code":"restoreHealth()"},{"type":"text","text":" 메서드에서"},{"type":"text","text":" "},{"type":"codeVoice","code":"self"},{"type":"text","text":"에 쓰기 접근은 메서드의 처음에서 시작하고"},{"type":"text","text":" "},{"type":"text","text":"메서드가 반환될 때까지 유지됩니다."},{"type":"text","text":" "},{"type":"text","text":"이 경우에 "},{"type":"codeVoice","code":"restoreHealth()"},{"type":"text","text":" 내부에"},{"type":"text","text":" "},{"type":"codeVoice","code":"Player"},{"type":"text","text":" 인스턴스의 프로퍼티에 중복 접근하는"},{"type":"text","text":" "},{"type":"text","text":"다른 코드는 없습니다."},{"type":"text","text":" "},{"type":"text","text":"아래의 "},{"type":"codeVoice","code":"shareHealth(with:)"},{"type":"text","text":" 메서드는"},{"type":"text","text":" "},{"type":"text","text":"in-out 매개변수로 다른 "},{"type":"codeVoice","code":"Player"},{"type":"text","text":" 인스턴스를 가지고 있으며"},{"type":"text","text":" "},{"type":"text","text":"중복 접근에 대한 가능성을 만듭니다."}]},{"code":["extension Player {","    mutating func shareHealth(with teammate: inout Player) {","        balance(&teammate.health, &health)","    }","}","","var oscar = Player(name: \"Oscar\", health: 10, energy: 10)","var maria = Player(name: \"Maria\", health: 5, energy: 10)","oscar.shareHealth(with: &maria)  \/\/ OK"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"위의 예시에서","type":"text"},{"text":" ","type":"text"},{"text":"Oscar 플레이어의 체력을 Maria 플레이어와 함께 공유하기 위해","type":"text"},{"text":" ","type":"text"},{"code":"shareHealth(with:)","type":"codeVoice"},{"text":" 메서드 호출은","type":"text"},{"text":" ","type":"text"},{"text":"중복을 야기시키지 않습니다.","type":"text"},{"text":" ","type":"text"},{"code":"oscar","type":"codeVoice"},{"text":"는 mutating 메서드에서 ","type":"text"},{"code":"self","type":"codeVoice"},{"text":"의 값이기 때문에","type":"text"},{"text":" ","type":"text"},{"text":"해당 메서드 호출 동안","type":"text"},{"text":" ","type":"text"},{"code":"oscar","type":"codeVoice"},{"text":"에 대한 쓰기 접근이 발생하고,","type":"text"},{"text":" ","type":"text"},{"code":"maria","type":"codeVoice"},{"text":"는 in-out 매개변수로 전달되기 때문에","type":"text"},{"text":" ","type":"text"},{"code":"maria","type":"codeVoice"},{"text":"에 대한 쓰기 접근이 발생합니다.","type":"text"},{"text":" ","type":"text"},{"text":"아래 그림과 같이","type":"text"},{"text":" ","type":"text"},{"text":"이 접근은 메모리의 다른 위치를 접근합니다.","type":"text"},{"text":" ","type":"text"},{"text":"두 쓰기 접근이 동시에 겹치지만","type":"text"},{"text":" ","type":"text"},{"text":"충돌은 일어나지 않습니다.","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"memory_share_health_maria","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"그러나"},{"type":"text","text":" "},{"type":"codeVoice","code":"shareHealth(with:)"},{"type":"text","text":"에 "},{"type":"codeVoice","code":"oscar"},{"type":"text","text":"를 전달하면"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생합니다:"}]},{"code":["oscar.shareHealth(with: &oscar)","\/\/ Error: conflicting accesses to oscar"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"mutating 메서드는 "},{"code":"self","type":"codeVoice"},{"type":"text","text":"에 대한"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근이 필요하고"},{"type":"text","text":" "},{"type":"text","text":"동시에 in-out 매개변수는 "},{"code":"teammate","type":"codeVoice"},{"type":"text","text":"에"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근이 필요합니다."},{"type":"text","text":" "},{"type":"text","text":"메서드 내에서"},{"type":"text","text":" "},{"code":"self","type":"codeVoice"},{"type":"text","text":"와 "},{"code":"teammate","type":"codeVoice"},{"type":"text","text":" 모두는"},{"type":"text","text":" "},{"type":"text","text":"아래 그림과 같이"},{"type":"text","text":" "},{"type":"text","text":"메모리의 같은 위치를 참조합니다."},{"type":"text","text":" "},{"type":"text","text":"두 쓰기 접근이"},{"type":"text","text":" "},{"type":"text","text":"같은 메모리를 참조하므로"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생합니다."}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"memory_share_health_oscar"}]},{"anchor":"%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%91%EA%B7%BC-%EC%B6%A9%EB%8F%8C-Conflicting-Access-to-Properties","type":"heading","level":2,"text":"프로퍼티에 대한 접근 충돌 (Conflicting Access to Properties)"},{"type":"paragraph","inlineContent":[{"text":"구조체, 튜플, 열거형과 같은 타입은","type":"text"},{"text":" ","type":"text"},{"text":"구조체의 프로퍼티나 튜플의 요소와 같이","type":"text"},{"text":" ","type":"text"},{"text":"개별 구성 값으로 이루어져 있습니다.","type":"text"},{"text":" ","type":"text"},{"text":"이것은 값 타입이기 때문에 값의 일부분을 변경하면","type":"text"},{"text":" ","type":"text"},{"text":"전체 값이 변경되고,","type":"text"},{"text":" ","type":"text"},{"text":"이것은 프로퍼티 중 하나에 읽기 접근이나 쓰기 접근은","type":"text"},{"text":" ","type":"text"},{"text":"전체 값의 읽기 접근이나 쓰기 접근을 요구합니다.","type":"text"},{"text":" ","type":"text"},{"text":"예를 들어","type":"text"},{"text":" ","type":"text"},{"text":"튜플의 요소에 쓰기 접근이 겹치면","type":"text"},{"text":" ","type":"text"},{"text":"충돌이 발생합니다:","type":"text"}]},{"code":["var playerInformation = (health: 10, energy: 20)","balance(&playerInformation.health, &playerInformation.energy)","\/\/ Error: conflicting access to properties of playerInformation"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"위의 예시에서"},{"type":"text","text":" "},{"type":"codeVoice","code":"balance(_:_:)"},{"type":"text","text":"를 호출할 때 튜플의 요소를 전달하면"},{"type":"text","text":" "},{"type":"codeVoice","code":"playerInformation"},{"type":"text","text":"에 중복 쓰기 접근이므로"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생합니다."},{"type":"text","text":" "},{"type":"codeVoice","code":"playerInformation.health"},{"type":"text","text":"와 "},{"type":"codeVoice","code":"playerInformation.energy"},{"type":"text","text":"는"},{"type":"text","text":" "},{"type":"codeVoice","code":"balance(_:_:)"},{"type":"text","text":" 함수를 호출할 때"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근이 필요하다는 의미의"},{"type":"text","text":" "},{"type":"text","text":"in-out 매개변수로 전달합니다."},{"type":"text","text":" "},{"type":"text","text":"이 경우 튜플 요소의 쓰기 접근은"},{"type":"text","text":" "},{"type":"text","text":"튜플 전체의 쓰기 접근을 요구합니다."},{"type":"text","text":" "},{"type":"text","text":"이것은 "},{"type":"codeVoice","code":"playerInformation"},{"type":"text","text":"에 두 쓰기 접근이"},{"type":"text","text":" "},{"type":"text","text":"겹치므로"},{"type":"text","text":" "},{"type":"text","text":"충돌이 발생합니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"아래의 코드는 전역 변수에 저장된"},{"type":"text","text":" "},{"type":"text","text":"구조체의 프로퍼티에"},{"type":"text","text":" "},{"type":"text","text":"쓰기 접근이 중복될 때"},{"type":"text","text":" "},{"type":"text","text":"동일한 오류가 발생하는 것을 보여줍니다."}]},{"code":["var holly = Player(name: \"Holly\", health: 10, energy: 10)","balance(&holly.health, &holly.energy)  \/\/ Error"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"실제로는"},{"type":"text","text":" "},{"type":"text","text":"대부분의 구조체 프로퍼티에 접근하는 것은"},{"type":"text","text":" "},{"type":"text","text":"겹쳐도 안전합니다."},{"type":"text","text":" "},{"type":"text","text":"예를 들어"},{"type":"text","text":" "},{"type":"text","text":"위의 예시에서 변수 "},{"type":"codeVoice","code":"holly"},{"type":"text","text":"는"},{"type":"text","text":" "},{"type":"text","text":"전역 변수가 아닌 지역 변수로 변경하면"},{"type":"text","text":" "},{"type":"text","text":"컴파일러는 구조체의 저장 프로퍼티에"},{"type":"text","text":" "},{"type":"text","text":"중복 접근이 안전하다고 판단합니다:"}]},{"code":["func someFunction() {","    var oscar = Player(name: \"Oscar\", health: 10, energy: 10)","    balance(&oscar.health, &oscar.energy)  \/\/ OK","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"위의 예시에서"},{"type":"text","text":" "},{"type":"text","text":"Oscar의 체력과 에너지는"},{"type":"text","text":" "},{"type":"codeVoice","code":"balance(_:_:)"},{"type":"text","text":"에 두 개의 in-out 매개변수로 전달합니다."},{"type":"text","text":" "},{"type":"text","text":"컴파일러는 두 개의 저장 프로퍼티가 어떤식으로도 상호작용 하지 않으므로"},{"type":"text","text":" "},{"type":"text","text":"메모리 안정성이 유지된다고 판단할 수 있습니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"구조체 프로퍼티의 중복 접근에 대한"},{"type":"text","text":" "},{"type":"text","text":"제한은"},{"type":"text","text":" "},{"type":"text","text":"메모리 안정성을 위해 항상 필요한 것은 아닙니다."},{"type":"text","text":" "},{"type":"text","text":"메모리 안정성을 보장하는 것을 목표로 하지만,"},{"type":"text","text":" "},{"type":"text","text":"배타적 접근(exclusive access)은 메모리 안정성보다 더 엄격한 요구사항입니다 —"},{"type":"text","text":" "},{"type":"text","text":"이것은 어떤 코드는 메모리 안정성은 유지하지만,"},{"type":"text","text":" "},{"type":"text","text":"배타적 접근을 위반할 수 있다는 의미입니다."},{"type":"text","text":" "},{"type":"text","text":"Swift는 컴파일러가 메모리의 배타적이지 않은 접근(nonexclusive access)이 안전하다고 증명할 수 있으면"},{"type":"text","text":" "},{"type":"text","text":"해당 코드를 허용합니다."},{"type":"text","text":" "},{"type":"text","text":"특히"},{"type":"text","text":" "},{"type":"text","text":"아래의 조건이 적용되면"},{"type":"text","text":" "},{"type":"text","text":"구조체의 프로퍼티에 중복 접근은 안전하다고 증명할 수 있습니다:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"인스턴스의 저장 프로퍼티만 접근하고,"},{"type":"text","text":" "},{"type":"text","text":"연산 프로퍼티나 클래스 프로퍼티에는 접근하지 않습니다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"구조체는 전역 변수가 아닌"},{"type":"text","text":" "},{"type":"text","text":"지역 변수의 값입니다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"구조체는 클로저에 의해 캡쳐되지 않거나"},{"type":"text","text":" "},{"type":"text","text":"nonescaping 클로저에 의해서만 캡처됩니다."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"컴파일러가 접근이 안전하다는 것을 증명할 수 없으면"},{"type":"text","text":" "},{"type":"text","text":"접근을 허용하지 않습니다."}]},{"name":"Beta Software","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""}]},{"type":"paragraph","inlineContent":[{"text":"This documentation contains preliminary information about an API or technology in development. This information is subject to change, and software implemented according to this documentation should be tested with final operating system software.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Learn more about using "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/support\/beta-software\/"},{"type":"text","text":"."}]}]}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/org.swift.tsplk\/documentation\/The-Swift-Programming-Language-Korean\/MemorySafety"},"schemaVersion":{"major":0,"patch":0,"minor":3},"kind":"article","abstract":[{"text":"메모리 접근할 때 충돌을 피하도록 코드를 구조화합니다.","type":"text"}],"sections":[],"references":{"https://developer.apple.com/documentation/synchronization/atomiclazyreference":{"url":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomiclazyreference","titleInlineContent":[{"code":"AtomicLazyReference","type":"codeVoice"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomiclazyreference","title":"AtomicLazyReference"},"https://developer.apple.com/support/beta-software/":{"url":"https:\/\/developer.apple.com\/support\/beta-software\/","titleInlineContent":[{"text":"Apple’s beta software","type":"text"}],"type":"link","identifier":"https:\/\/developer.apple.com\/support\/beta-software\/","title":"Apple’s beta software"},"memory_share_health_oscar":{"alt":"Memory Share Health Oscar","type":"image","identifier":"memory_share_health_oscar","variants":[{"url":"\/images\/org.swift.tsplk\/memory_share_health_oscar@2x.png","traits":["2x","light"]},{"url":"\/images\/org.swift.tsplk\/memory_share_health_oscar~dark@2x.png","traits":["2x","dark"]}]},"https://developer.apple.com/documentation/xcode/diagnosing_memory_thread_and_crash_issues_early":{"url":"https:\/\/developer.apple.com\/documentation\/xcode\/diagnosing_memory_thread_and_crash_issues_early","titleInlineContent":[{"text":"Thread Sanitizer","type":"text"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/xcode\/diagnosing_memory_thread_and_crash_issues_early","title":"Thread Sanitizer"},"memory_shopping":{"alt":"Memory Shopping","type":"image","identifier":"memory_shopping","variants":[{"url":"\/images\/org.swift.tsplk\/memory_shopping@2x.png","traits":["2x","light"]},{"url":"\/images\/org.swift.tsplk\/memory_shopping~dark@2x.png","traits":["2x","dark"]}]},"memory_increment":{"alt":"Memory Increment","type":"image","identifier":"memory_increment","variants":[{"url":"\/images\/org.swift.tsplk\/memory_increment@2x.png","traits":["2x","light"]},{"url":"\/images\/org.swift.tsplk\/memory_increment~dark@2x.png","traits":["2x","dark"]}]},"memory_share_health_maria":{"alt":"Memory Share Health Maria","type":"image","identifier":"memory_share_health_maria","variants":[{"url":"\/images\/org.swift.tsplk\/memory_share_health_maria@2x.png","traits":["2x","light"]},{"url":"\/images\/org.swift.tsplk\/memory_share_health_maria~dark@2x.png","traits":["2x","dark"]}]},"doc://org.swift.tsplk/documentation/TSPLK":{"kind":"article","abstract":[],"type":"topic","url":"\/documentation\/tsplk","title":"The Swift Programming Language (6.2 Beta) (한국어)","identifier":"doc:\/\/org.swift.tsplk\/documentation\/TSPLK","role":"collection"},"https://developer.apple.com/documentation/synchronization/atomic":{"url":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomic","titleInlineContent":[{"code":"Atomic","type":"codeVoice"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/synchronization\/atomic","title":"Atomic"}}}